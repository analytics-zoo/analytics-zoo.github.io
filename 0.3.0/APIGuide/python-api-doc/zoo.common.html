
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>zoo.common package &#8212; analytics-zoo  documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="zoo.examples package" href="zoo.examples.html" />
    <link rel="prev" title="zoo package" href="zoo.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="zoo.examples.html" title="zoo.examples package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="zoo.html" title="zoo package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">analytics-zoo  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="zoo.html" accesskey="U">zoo package</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">zoo.common package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-zoo.common.nncontext">zoo.common.nncontext module</a></li>
<li><a class="reference internal" href="#module-zoo.common.utils">zoo.common.utils module</a></li>
<li><a class="reference internal" href="#module-zoo.common">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="zoo.html"
                        title="previous chapter">zoo package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="zoo.examples.html"
                        title="next chapter">zoo.examples package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/zoo.common.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="zoo-common-package">
<h1>zoo.common package<a class="headerlink" href="#zoo-common-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-zoo.common.nncontext">
<span id="zoo-common-nncontext-module"></span><h2>zoo.common.nncontext module<a class="headerlink" href="#module-zoo.common.nncontext" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="zoo.common.nncontext.check_version">
<code class="descclassname">zoo.common.nncontext.</code><code class="descname">check_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zoo/common/nncontext.html#check_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zoo.common.nncontext.check_version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="zoo.common.nncontext.getOrCreateSparkContext">
<code class="descclassname">zoo.common.nncontext.</code><code class="descname">getOrCreateSparkContext</code><span class="sig-paren">(</span><em>conf=None</em>, <em>appName=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zoo/common/nncontext.html#getOrCreateSparkContext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zoo.common.nncontext.getOrCreateSparkContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current active spark context and create one if no active instance
:param conf: combining bigdl configs into spark conf
:return: SparkContext</p>
</dd></dl>

<dl class="function">
<dt id="zoo.common.nncontext.get_analytics_zoo_conf">
<code class="descclassname">zoo.common.nncontext.</code><code class="descname">get_analytics_zoo_conf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zoo/common/nncontext.html#get_analytics_zoo_conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zoo.common.nncontext.get_analytics_zoo_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="zoo.common.nncontext.init_nncontext">
<code class="descclassname">zoo.common.nncontext.</code><code class="descname">init_nncontext</code><span class="sig-paren">(</span><em>conf=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zoo/common/nncontext.html#init_nncontext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zoo.common.nncontext.init_nncontext" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates or gets a SparkContext with optimized configuration for BigDL performance.
The method will also initialize the BigDL engine.</p>
<p>Note: if you use spark-shell or Jupyter notebook, as the Spark context is created
before your code, you have to set Spark conf values through command line options
or properties file, and init BigDL engine manually.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>conf</strong> – User defined Spark conf</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zoo.common.nncontext.init_spark_conf">
<code class="descclassname">zoo.common.nncontext.</code><code class="descname">init_spark_conf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zoo/common/nncontext.html#init_spark_conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zoo.common.nncontext.init_spark_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="zoo.common.nncontext.load_conf">
<code class="descclassname">zoo.common.nncontext.</code><code class="descname">load_conf</code><span class="sig-paren">(</span><em>conf_str</em>, <em>split_char=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zoo/common/nncontext.html#load_conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zoo.common.nncontext.load_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-zoo.common.utils">
<span id="zoo-common-utils-module"></span><h2>zoo.common.utils module<a class="headerlink" href="#module-zoo.common.utils" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="zoo.common.utils.JTensor">
<em class="property">class </em><code class="descclassname">zoo.common.utils.</code><code class="descname">JTensor</code><span class="sig-paren">(</span><em>storage</em>, <em>shape</em>, <em>bigdl_type='float'</em>, <em>indices=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zoo/common/utils.html#JTensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zoo.common.utils.JTensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">bigdl.util.common.JTensor</span></code></p>
<dl class="classmethod">
<dt id="zoo.common.utils.JTensor.from_ndarray">
<em class="property">classmethod </em><code class="descname">from_ndarray</code><span class="sig-paren">(</span><em>a_ndarray</em>, <em>bigdl_type='float'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zoo/common/utils.html#JTensor.from_ndarray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zoo.common.utils.JTensor.from_ndarray" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a ndarray to a DenseTensor which would be used in Java side.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zoo.common.utils.Sample">
<em class="property">class </em><code class="descclassname">zoo.common.utils.</code><code class="descname">Sample</code><span class="sig-paren">(</span><em>features</em>, <em>labels</em>, <em>bigdl_type='float'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zoo/common/utils.html#Sample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zoo.common.utils.Sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">bigdl.util.common.Sample</span></code></p>
<dl class="classmethod">
<dt id="zoo.common.utils.Sample.from_ndarray">
<em class="property">classmethod </em><code class="descname">from_ndarray</code><span class="sig-paren">(</span><em>features</em>, <em>labels</em>, <em>bigdl_type='float'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zoo/common/utils.html#Sample.from_ndarray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zoo.common.utils.Sample.from_ndarray" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a ndarray of features and labels to Sample, which would be used in Java side.
:param features: an ndarray or a list of ndarrays
:param labels: an ndarray or a list of ndarrays or a scalar
:param bigdl_type: “double” or “float”</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bigdl.util.common</span> <span class="k">import</span> <span class="n">callBigDlFunc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy.testing</span> <span class="k">import</span> <span class="n">assert_allclose</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="n">Sample</span><span class="o">.</span><span class="n">from_ndarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_back</span> <span class="o">=</span> <span class="n">callBigDlFunc</span><span class="p">(</span><span class="s2">&quot;float&quot;</span><span class="p">,</span> <span class="s2">&quot;testSample&quot;</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assert_allclose</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">features</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(),</span> <span class="n">sample_back</span><span class="o">.</span><span class="n">features</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assert_allclose</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(),</span> <span class="n">sample_back</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_feature_storage</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([[</span><span class="mf">0.69646919</span><span class="p">,</span> <span class="mf">0.28613934</span><span class="p">,</span> <span class="mf">0.22685145</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.55131477</span><span class="p">,</span> <span class="mf">0.71946895</span><span class="p">,</span> <span class="mf">0.42310646</span><span class="p">]]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_feature_shape</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_label_storage</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([[</span><span class="mf">0.98076421</span><span class="p">,</span> <span class="mf">0.68482971</span><span class="p">,</span> <span class="mf">0.48093191</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.39211753</span><span class="p">,</span> <span class="mf">0.343178</span><span class="p">,</span> <span class="mf">0.72904968</span><span class="p">]]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_label_shape</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assert_allclose</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">features</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">storage</span><span class="p">,</span> <span class="n">expected_feature_storage</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assert_allclose</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">features</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">expected_feature_shape</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assert_allclose</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">storage</span><span class="p">,</span> <span class="n">expected_label_storage</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assert_allclose</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">expected_label_shape</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="zoo.common.utils.to_list_of_numpy">
<code class="descclassname">zoo.common.utils.</code><code class="descname">to_list_of_numpy</code><span class="sig-paren">(</span><em>elements</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zoo/common/utils.html#to_list_of_numpy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zoo.common.utils.to_list_of_numpy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-zoo.common">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-zoo.common" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="zoo.examples.html" title="zoo.examples package"
             >next</a> |</li>
        <li class="right" >
          <a href="zoo.html" title="zoo package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">analytics-zoo  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="zoo.html" >zoo package</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Intel.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.1.
    </div>
  </body>
</html>